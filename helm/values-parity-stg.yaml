# gcloud-sqlproxy:
#   serviceAccount:
#     annotations:
#       iam.gke.io/gcp-service-account: 'matrix-admin-bot@parity-stg.iam.gserviceaccount.com'
#   cloudsql:
#     instances:
#     - instance: "matrix-admin-bot-db-pgsql"
#       project: "parity-stg"
#       region: "europe-west3"
#       port: 5432

common:
  env:
    APP_HOST: "https://matrix-admin-bot.parity-stg.parity.io"
    DATABASE_NAME: "matrix-admin-bot"
  secrets:
    ACCESS_TOKEN: ref+vault://kv/cicd/gitlab/parity/mirrors/matrix-admin-bot/parity-stg#ACCESS_TOKEN
    INVITE_ROOMS_LIST: ref+vault://kv/cicd/gitlab/parity/mirrors/matrix-admin-bot/parity-stg#INVITE_ROOMS_LIST
    ADMIN_ROOM_ID: ref+vault://kv/cicd/gitlab/parity/mirrors/matrix-admin-bot/parity-stg#ADMIN_ROOM_ID
  ingress:
    annotations:
      external-dns.alpha.kubernetes.io/target: traefik-internal.parity-stg.parity.io.
    rules:
    - host: matrix-admin-bot.parity-stg.parity.io
      http:
        paths:
        - path: /
          pathType: ImplementationSpecific
          backend:
            service:
              name: matrix-admin-bot
              port:
                name: http
    tls:
    - hosts:
      - matrix-admin-bot.parity-stg.parity.io
      secretName: matrix-admin-bot.parity-stg.parity.io
